# Лабораторная работа. Доступ к сетевым устройствам по протоколу SSH

### 	Топология:

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic01.JPG)


### 	Таблица адресации:

| Устройство | Интерфейс | IP-адрес | Маска подсети | Шлюз по умолчанию |
| --- | --- | --- | --- | --- |
| R1 | G0/0/1 | 192.168.1.1 | 255.255.255.0 | - |
| S1 | VLAN 1 | 192.168.1.11 | 255.255.255.0 | 192.168.1.1 |
| PC-A | NIC | 192.168.1.3 | 255.255.255.0 | 192.168.1.1 |

### Задачи:

#### Часть 1. Настройка основных параметров устройства

#### Часть 2. Настройка маршрутизатора для доступа по протоколу SSH

#### Часть 3. Настройка коммутатора для доступа по протоколу SSH

#### Часть 4. SSH через интерфейс командной строки (CLI) коммутатора



### Часть 1. Настройка основных параметров устройства

#### Шаг 1. Создана сеть согласно топологии:

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic02.JPG)


#### Шаг 2. Выполнение инициализации, установки паролей, IP-адресов и перезагрузки коммутатора.

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic03.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic04.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic06.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic05.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic06_1.JPG)



#### Шаг 3. Настройка маршрутизатора

a.	Активирован привилегированный режим EXEC.

b.	Вход в режим конфигурации.

c.	Отключен поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.

d.	Назначен пароль class в качестве зашифрованного пароля привилегированного режима EXEC.

e.	Назначен пароль cisco в качестве пароля консоли и включите вход в систему по паролю.

f.	Назначен cisco в качестве пароля VTY и включите вход в систему по паролю.

g.	Зашифрованы открытые пароли.

h.	Создан баннер, который предупреждает о запрете несанкционированного доступа.

i.	Настроен и активирован на маршрутизаторе интерфейс G0/0/1, используя информацию, приведенную в таблице адресации.

j.	Сохранена текущая конфигурация в файл загрузочной конфигурации. Скриншоты ниже:


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic07.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic08.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic09.JPG)


#### Шаг 4. Настройка компьютера PC-A.

a.	Настроены для PC-A IP-адрес и маска подсети.

b.	Настроены для PC-A шлюз по умолчанию, скрины ниже:


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic10.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic11.JPG)


#### Шаг 5. Проверка подключения к сети.

C PC-A отправлена команда Ping на маршрутизатор R1 и коммутатор S1:

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic12.JPG)


### Часть 2. Настройка маршрутизатора для доступа по протоколу SSH

Подключение к сетевым устройствам по протоколу Telnet сопряжено с риском для безопасности, поскольку вся информация передается в виде открытого текста. Протокол SSH шифрует данные сеанса и обеспечивает аутентификацию устройств, поэтому для удаленных подключений рекомендуется использовать именно этот протокол. В части 2 нужно настроить маршрутизатор для приема соединений SSH по линиям VTY.


#### Шаг 1. Настройка аутентификации устройства.
#### Шаг 2. Создание ключа шифрования с указанием его длины.
#### Шаг 3. Создание имя пользователя в локальной базе учетных записей.

Настроено имя пользователя, используя admin в качестве имени пользователя и Adm1nP @55 в качестве пароля.

#### Шаг 4. Активирован протокол SSH на линиях VTY.

a.	Активирован протокол SSH на входящих линиях VTY с помощью команды transport input.

b.	Изменен способ входа в систему таким образом, чтобы использовалась проверка пользователей по локальной базе учетных записей.

c. *Активировать оба протокола Telnet и SSH можно командами:*

        *live vty 0 4*

         *transport input all*

#### Шаг 5. Сохранение текущей конфигурации в файл загрузочной конфигурации.

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic13.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic13_1.JPG)


#### Шаг 6. Установление соединения с маршрутизатором по протоколу SSH.

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic14.JPG)


### Часть 3. Настройка коммутатора для доступа по протоколу SSH


В части 3 необходимо настроить коммутатор для приема подключений по протоколу SSH, а затем установить SSH-подключение с помощью программы Tera Term.

#### Шаг 1. Настройка основных параметры коммутатора.

Пункты шага 1 выполнены в части 1 данной лабораторной работы.


#### Шаг 2. Настройка коммутатора для соединения по протоколу SSH.

Для настройки протокола SSH на коммутаторе использовались те же команды, которые применялись для аналогичной настройки маршрутизатора в части 2.

a.	Настроено имя устройства, как указано в таблице адресации.

b.	Задан домен для устройства.

c.	Создан ключ шифрования с указанием его длины.

d.	Создано имя пользователя в локальной базе учетных записей.

e.	Активирован протокол SSH на линиях VTY.

f.	Изменен способ входа в систему таким образом, чтобы использовалась проверка пользователей по локальной базе учетных записей.

g. *Активировать оба протокола Telnet и SSH можно командами:*

        *live vty 0 4*

        *transport input all*



![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic15.JPG)


#### Шаг 3. Установка соединения с коммутатором по протоколу SSH:

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic16.JPG)



### Часть 4. Настройка протокола SSH с использованием интерфейса командной строки (CLI) коммутатора.

Клиент SSH встроен в операционную систему Cisco IOS и может запускаться из интерфейса командной строки. В части 4 необходимо установить соединение с маршрутизатором по протоколу SSH, используя интерфейс командной строки коммутатора.


#### Шаг 1. Обзор доступных параметров для клиента SSH в Cisco IOS. 

Скрин ниже.

#### Шаг 2. С помощью командной строки коммутатора S1 установлено соединение с маршрутизатором R1 по протоколу SSH.


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic17.JPG)


Чтобы вернуться к коммутатору S1, не закрывая сеанс SSH с маршрутизатором R1, нажимаем комбинацию клавиш Ctrl+Shift+6. Отпускаем клавиши Ctrl+Shift+6 и нажмаем x. Отображается приглашение привилегированного режима EXEC коммутатора.
Чтобы вернуться к сеансу SSH на R1, нажмимаем клавишу Enter в пустой строке интерфейса командной строки. Чтобы увидеть окно командной строки маршрутизатора, нажмаем клавишу Enter еще раз.

*Вопрос: Какие версии протокола SSH поддерживаются при использовании интерфейса командной строки?*

*Ответ: В моей версии Cisco PT протокол SSH поддерживает две версии: 1.99 и 2. По умолчанию используется v.1.99, но так как данная версия имеет ряд уязвимостей, необходимо использовать v.2*


#### 	Вопрос для повторения

*Вопрос: Как предоставить доступ к сетевому устройству нескольким пользователям, у каждого из которых есть собственное имя пользователя?*

*Ответ: Необходимо прописать каждого пользователя в память устройства. Скрин ниже*

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab05/pic18.JPG)



















