# Лабораторная работа - Внедрение маршрутизации между виртуальными локальными сетями

### Топология:

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic00.JPG)


### Таблица адресации:

| Устройство | Интерфейс | IP-адрес | Маска подсети | Шлюз по умолчанию |
| --- | --- | --- | --- | --- |
| R1 | G0/0/1.10 | 192.168.10.1 | 255.255.255.0 | - |
| R1 | G0/0/1.20 | 192.168.20.1 | 255.255.255.0 | - |
| R1 | G0/0/1.30 | 192.168.30.1 | 255.255.255.0 | - |
| R1 | G0/0/1.1000 | - | - | - |
| S1 | VLAN 10 | 192.168.10.11 | 255.255.255.0 | 192.168.10.1 |
| S2 | VLAN 10 | 192.168.10.12 | 255.255.255.0 | 192.168.10.1 |
| PC-A | NIC | 192.168.20.3 | 255.255.255.0 | 192.168.20.1 |
| PC-B | NIC | 192.168.30.3 | 255.255.255.0 | 192.168.30.1 |


### Таблица VLAN:

| VLAN | Имя | Назначенный интерфейс |
| --- | --- | --- |
| 10 | Управление | S1: VLAN 10 ; S2: VLAN 10 |
| 20 | Sales | S1: F0/6 |
| 30 | Operations | S2: F0/18 |
| 999 | Parking_Lot | С1: F0/2-4, F0/7-24, G0/1-2 ; С2: F0/2-17, F0/19-24, G0/1-2 |
| 1000 | Собственная | - |



# Задачи

#### Часть 1. Создание сети и настройка основных параметров устройства

#### Часть 2. Создание сетей VLAN и назначение портов коммутатора

#### Часть 3. Настройка транка 802.1Q между коммутаторами

#### Часть 4. Настройка маршрутизации между сетями VLAN

#### Часть 5. Проверка, что маршрутизация между VLAN работает



### Часть 1. Создание сети и настройка основных параметров устройства

#### Шаг 1. Создана сеть согласно топологии:


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic01.JPG)


#### Шаг 2. Настройка базовых параметров для маршрутизатора. 

Выполнены следующие пункты:

a.	Подключитесь к маршрутизатору с помощью консоли и активируйте привилегированный режим EXEC. Откройте окно конфигурации
b.	Войдите в режим конфигурации.
c.	Назначьте маршрутизатору имя устройства.
d.	Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.
e.	Назначьте class в качестве зашифрованного пароля привилегированного режима EXEC.
f.	Назначьте cisco в качестве пароля консоли и включите вход в систему по паролю.
g.	Установите cisco в качестве пароля виртуального терминала и активируйте вход.
h.	Зашифруйте открытые пароли.
i.	Создайте баннер с предупреждением о запрете несанкционированного доступа к устройству.
j.	Сохраните текущую конфигурацию в файл загрузочной конфигурации.
k.	Настройте на маршрутизаторе время.

Скнрин с настройками маршрутизатора :

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic02.JPG)

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic03.JPG)


#### Шаг 3. Настройте базовые параметры каждого коммутатора.

Выполнены следующие пункты по настройке коммутатора S1:

a.	Присвойте коммутатору имя устройства.
b.	Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.
c.	Назначьте class в качестве зашифрованного пароля привилегированного режима EXEC.
d.	Назначьте cisco в качестве пароля консоли и включите вход в систему по паролю.
e.	Установите cisco в качестве пароля виртуального терминала и активируйте вход.
f.	Зашифруйте открытые пароли.
g.	Создайте баннер с предупреждением о запрете несанкционированного доступа к устройству.
h.	Настройте на коммутаторах время.
i.	Сохранение текущей конфигурации в качестве начальной.

Скрин с настройками коммутатора S1:

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic04.JPG)

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic05.JPG)


Выполнены пункты от a до i (указаны выше) по настройке коммутатора S2:

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic06.JPG)

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic07.JPG)




#### Шаг 4. Настройка узлов ПК.

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic08.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic09.JPG)



### Часть 2. Создание сетей VLAN и назначение портов коммутатора

Во второй части создадим VLAN, как указано в таблице выше, на обоих коммутаторах. Затем назначим VLAN соответствующему интерфейсу и проверим настройки конфигурации.

#### Шаг 1. Создадим сети VLAN на коммутаторах.

Выполним следующие действия для создания VLAN на коммутаторе S1:

a.	Создайте и назовите необходимые VLAN на каждом коммутаторе из таблицы выше.
Откройте окно конфигурации
b.	Настройте интерфейс управления и шлюз по умолчанию на каждом коммутаторе, используя информацию об IP-адресе в таблице адресации. 
c.	Назначьте все неиспользуемые порты коммутатора VLAN Parking_Lot, настройте их для статического режима доступа и административно деактивируйте их.
Примечание. Команда interface range полезна для выполнения этой задачи с минимальным количеством команд.

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic10.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic11.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic12.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic13.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic13_1.JPG)


Выполним те же самые действия для создания VLAN на коммутаторе S2:

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic14.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic15.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic16.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic17.JPG)


![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic18.JPG)



#### Шаг 2. Назначение сети VLAN соответствующим интерфейсам коммутатора.

Выполнены следующие действия:

a.	Назначьте используемые порты соответствующей VLAN (указанной в таблице VLAN выше) и настройте их для режима статического доступа.
b.	Убедитесь, что VLAN назначены на правильные интерфейсы.

Коммутатор S1:

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic13.JPG)


Коммутатор S2:

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic17.JPG)



### Часть 3. Конфигурация магистрального канала стандарта 802.1Q между коммутаторами

В части 3 вручную настраивается интерфейс F0/1 как транк.

#### Шаг 1. Вручную настройте магистральный интерфейс F0/1 на коммутаторах S1 и S2.

Выполнены следующие действия для S1:

a.	Настройка статического транкинга на интерфейсе F0/1 для обоих коммутаторов.
Откройте окно конфигурации
b.	Установите native VLAN 1000 на обоих коммутаторах.
c.	Укажите, что VLAN 10, 20, 30 и 1000 могут проходить по транку.
d.	Проверьте транки, native VLAN и разрешенные VLAN через транк.

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic19.JPG)

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic20.JPG)



Аналогичные действия выполнены для S2:

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic21.JPG)


#### Шаг 2. Вручную настроен магистральный интерфейс F0/5 на коммутаторе S1.

Выполнены следующие действия на S1:

a.	Настройте интерфейс S1 F0/5 с теми же параметрами транка, что и F0/1. Это транк до маршрутизатора.
b.	Сохраните текущую конфигурацию в файл загрузочной конфигурации.
c.	Проверка транкинга.



![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic22.JPG)

![](https://github.com/AlexIridium/net_engineer_otus/blob/main/lab06/pic23.JPG)


*Вопрос:*

Что произойдет, если G0/0/1 на R1 будет отключен?

*Ответ:*

Связь между VLANами потеряется.







